# Uplink decoder decodes binary data uplink into a JSON object (optional)
# For documentation on writing encoders and decoders, see: https://thethingsstack.io/integrations/payload-formatters/javascript/
uplinkDecoder:
  fileName: sd01-l-uplink.js
  # Examples (optional)
  examples:
    - description: Install Request
      input:
        fPort: 1
        bytes: [0, 4, 0, 0x62, 0x17, 0xAD, 0x4C, 0x12, 0x34, 0x56, 0x78, 0x0E, 0x10, 0x01, 0xD6, 0x01, 0xE0, 0x01, 0xEA, 1, 0, 0, 0, 0, 0]
      output:
        data:
          type: 0
          version: 4
          sequence: 0
          timestamp: 0x6217AD4C
          nonce: 0x12345678
          battery_mV: 3600
          temperature: [20, 21, 22]
          firmware_version: { major: 1, minor: 0, build: 0 }
          reset_reason: 0
        errors: []
        warnings: []
    - description: Install Response
      input:
        fPort: 1
        bytes: [2, 1, 0, 0x62, 0x17, 0xAD, 0x4C, 0x00]
      output:
        data:
          type: 2
          version: 1
          sequence: 0
          timestamp: 0x6217AD4C
          error_code: 0
        errors: []
        warnings: []
    - description: Standard Report
      input:
        fPort: 1
        bytes:
          [
            3,
            1,
            0,
            0x62,
            0x17,
            0xAD,
            0x4C,
            20,
            25,
            0,
            0,
            20,
            25,
            0,
            0,
            20,
            25,
            0,
            0,
            0x62,
            0x17,
            0xAD,
            0x10,
            20,
            25,
            0,
            0,
            20,
            25,
            0,
            0,
            20,
            25,
            0,
            0,
            0x62,
            0x17,
            0xAC,
            0xD4,
            20,
            25,
            0,
            0,
            20,
            25,
            0,
            0,
            20,
            25,
            0,
            0,
          ]
      output:
        data:
          type: 3
          version: 1
          sequence: 0
          timestamp: 0x6217AD4C
          current:
            sensor:
              - { minC: 20, maxC: 25, events: 0, reports: 0 }
              - { minC: 20, maxC: 25, events: 0, reports: 0 }
              - { minC: 20, maxC: 25, events: 0, reports: 0 }
          history:
            - timestamp: 0x6217AD10
              sensor:
                - { minC: 20, maxC: 25, events: 0, reports: 0 }
                - { minC: 20, maxC: 25, events: 0, reports: 0 }
                - { minC: 20, maxC: 25, events: 0, reports: 0 }
            - timestamp: 0x6217ACD4
              sensor:
                - { minC: 20, maxC: 25, events: 0, reports: 0 }
                - { minC: 20, maxC: 25, events: 0, reports: 0 }
                - { minC: 20, maxC: 25, events: 0, reports: 0 }
        errors: []
        warnings: []
    - description: Ambient Report
      input:
        fPort: 1
        bytes: [4, 0, 0, 0x62, 0x17, 0xAD, 0x4C, 20, 22, 21]
      output:
        data:
          type: 4
          version: 0
          sequence: 0
          timestamp: 0x6217AD4C
          minC: 20
          maxC: 22
          avgC: 21
        errors: []
        warnings: []
    - description: Scald Report
      input:
        fPort: 1
        bytes: [5, 0, 0, 0x62, 0x17, 0xAD, 0x4C, 0, 61]
      output:
        data:
          type: 5
          version: 0
          sequence: 0
          timestamp: 0x6217AD4C
          sensor: 0
          temperature: 61
        errors: []
        warnings: []
    - description: Freeze Report
      input:
        fPort: 1
        bytes: [6, 0, 0, 0x62, 0x17, 0xAD, 0x4C, 0, 0xFF]
      output:
        data:
          type: 6
          version: 0
          sequence: 0
          timestamp: 0x6217AD4C
          sensor: 0
          temperature: -1
        errors: []
        warnings: []
    - description: Sensor Error Report
      input:
        fPort: 1
        bytes: [8, 0, 0, 0x62, 0x17, 0xAD, 0x4C, 1, 0, 0]
      output:
        data:
          type: 8
          version: 0
          sequence: 0
          timestamp: 0x6217AD4C
          sensor: [1, 0, 0]
        errors: []
        warnings: []
    - description: General Error Report
      input:
        fPort: 1
        bytes:
          [
            9,
            0,
            0,
            0x62,
            0x17,
            0xAD,
            0x4C,
            0x00,
            0x01,
            0x46,
            0x4F,
            0x4F,
            0x2E,
            0x42,
            0x41,
            0x52,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x00,
            0x40,
          ]
      output:
        data:
          type: 9
          version: 0
          sequence: 0
          timestamp: 0x6217AD4C
          error_code: 1
          file: FOO.BAR
          line: 64
        errors: []
        warnings: []

# Downlink encoder encodes JSON object into a binary data downlink (optional)
downlinkEncoder:
  fileName: sd01-l-downlink.js
  examples:
    - description: Configuration
      input:
        data:
          type: 1
          version: 3
          sequence: 0
          timestamp: 0x6217AD4C
          nonce: 0x12345678
          downlink_hours: 24
          message_flags:
            scald: Off
            freeze: Off
            ambient: Off
            history_count: 0
          scald_threshold: 60
          freeze_threshold: 4
          reporting_period: 60
          config_type:
            - { flow_settling_count: 0, config: 0 }
            - { flow_settling_count: 0, config: 0 }
            - { flow_settling_count: 0, config: 0 }
      output:
        bytes: [1, 3, 0, 0x62, 0x17, 0xAD, 0x4C, 0x12, 0x34, 0x56, 0x78, 24, 0, 60, 4, 0, 60, 0x00, 0x00, 0x00]
        fPort: 1
        errors: []
        warnings: []
